(function(){var t,n=window||this,e=n.BLOG.even,s=n.BLOG.$,i=s("#search"),a=s("#search-wrap"),r=s("#key"),o=s("#back"),c=s("#search-panel"),u=s("#search-result"),l=s("#search-tpl").innerHTML,f=(n.BLOG.ROOT+"/index.json").replace(/\/{2}/g,"/");n.BLOG.noop;var d=s("html"),p=function(){n.innerWidth<760&&d.classList.add("lock-size"),c.classList.add("in")},v=function(){n.innerWidth<760&&d.classList.remove("lock-size"),c.classList.remove("in")};function L(t,n){return n.lastIndex=0,n.test(t)}function h(n){var e=this.value.trim();if(e){var s=new RegExp(e.replace(/[ ]/g,"|"),"gmi");!function(n){if(t)n(t);else{var e=new XMLHttpRequest;e.open("GET",f,!0),e.onload=function(){if(this.status>=200&&this.status<300){var e=JSON.parse(this.response);t=e instanceof Array?e:e.posts,n(t)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}}(function(t){var n=t.filter(function(t){return function(t,n){return L(t.title,n)||t.tags.some(function(t){return L(t.name,n)})||L(t.text,n)}(t,s)});!function(t){var n="";n=t.length?t.map(function(t){return function(t,n){return t.replace(/\{\w+\}/g,function(t){var e=t.replace(/\{|\}/g,"");return n[e]||""})}(l,{title:t.title,path:t.permalink,date:new Date(t.date).toLocaleDateString(),tags:t.tags.map(function(t){return"<span>#"+t+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',u.innerHTML=n}(n),p()}),n.preventDefault()}}i.addEventListener(e,function(t){a.classList.toggle("in"),r.value="",a.classList.contains("in")?setTimeout(function(){r&&document.activeElement!==r&&(r.focus(),"function"==typeof r.setSelectionRange&&r.setSelectionRange(0,0))},100):(r&&r.blur(),v()),"touchstart"!==e&&t.preventDefault()}),o.addEventListener(e,function(){a.classList.remove("in"),r.blur(),v()}),document.addEventListener(e,function(t){a.contains(t.target)||"search"===t.target.id||(a.classList.remove("in"),r.blur(),v())}),r.addEventListener("input",h),r.addEventListener(e,h),r.addEventListener("focus",function(){a.classList.contains("in")||a.classList.add("in")})}).call(this);